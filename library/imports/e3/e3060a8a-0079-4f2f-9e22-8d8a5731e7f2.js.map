{"version":3,"sources":["../../../../../assets/commonScript/render/assets/commonScript/render/tm_frame_tool.js"],"names":["cc","Class","extends","Component","properties","_fpss","begin","unschedule","_stepCheck","schedule","macro","REPEAT_FOREVER","endSampling","length","eFps","sum","pf","_sum","localFps","len","i","fps","director","getDeltaTime","tm","LOGD","push"],"mappings":";;;;;;AAAA;;;;;;AAMAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAO;AADC,KAHP;;AAOLC,SAPK,mBAOE;AACH,aAAKD,KAAL,GAAa,EAAb;;AAEA,aAAKE,UAAL,CAAgB,KAAKC,UAArB;AACA,aAAKC,QAAL,CAAc,KAAKD,UAAnB,EAA+B,GAA/B,EAAoCR,GAAGU,KAAH,CAASC,cAA7C,EAA6D,CAA7D,EAAgE,KAAhE;AACH,KAZI;AAcLC,eAdK,yBAcQ;AACT,aAAKL,UAAL,CAAgB,KAAKC,UAArB;;AAEA,YAAG,CAAC,KAAKH,KAAT,EAAe;AACX,mBAAO,CAAP;AACH;;AAED,YAAG,KAAKA,KAAL,CAAWQ,MAAX,IAAqB,CAAxB,EAA0B;AACtB,mBAAO,CAAP;AACH;AACD,YAAIC,OAAO,KAAKC,GAAL,EAAX;;AAEA,YAAIC,KAAKF,OAAK,KAAKT,KAAL,CAAWQ,MAAzB;AACA;AACA,eAAOG,EAAP;AACH,KA7BI;AA+BLD,OA/BK,iBA+BA;AACD,YAAIE,OAAO,CAAX;AACA,YAAIC,WAAW,KAAKb,KAApB;AACA,YAAIc,MAAMD,SAASL,MAAnB;;AAEA,aAAI,IAAIO,IAAI,CAAZ,EAAcA,IAAID,GAAlB,EAAsBC,GAAtB,EAA0B;AACtBH,oBAAQC,SAASE,CAAT,CAAR;AACH;;AAED,eAAOH,IAAP;AACH,KAzCI;AA2CLT,cA3CK,wBA2CO;AACR,YAAIa,MAAMrB,GAAGsB,QAAH,CAAYC,YAAZ,EAAV;;AAEAC,WAAGC,IAAH,CAAQ,eAAR,EAAyBJ,GAAzB;;AAEA,aAAKhB,KAAL,CAAWqB,IAAX,CAAgBL,GAAhB;AACH;AAjDI,CAAT","file":"tm_frame_tool.js","sourceRoot":"../../../../../assets/commonScript/render","sourcesContent":["/**\n *\n * 内容:\n *\n */\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _fpss: null,\n    },\n\n    begin(){\n        this._fpss = [];\n\n        this.unschedule(this._stepCheck);\n        this.schedule(this._stepCheck, 0.2, cc.macro.REPEAT_FOREVER, 0, false);\n    },\n\n    endSampling(){\n        this.unschedule(this._stepCheck);\n\n        if(!this._fpss){\n            return 0;\n        }\n\n        if(this._fpss.length == 0){\n            return 0;\n        }\n        let eFps = this.sum();\n\n        let pf = eFps/this._fpss.length;\n        //tm.LOGD(\"Frame Tool eFps : \", pf);\n        return pf;\n    },\n\n    sum(){\n        let _sum = 0;\n        let localFps = this._fpss;\n        let len = localFps.length\n\n        for(var i = 0;i < len;i++){\n            _sum += localFps[i];\n        }\n\n        return _sum;\n    },\n\n    _stepCheck(){\n        let fps = cc.director.getDeltaTime();\n\n        tm.LOGD(\"Frame Tool : \", fps);\n\n        this._fpss.push(fps);\n    }\n\n});"]}