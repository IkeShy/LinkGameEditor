{"version":3,"sources":["../../../../../assets/commonScript/common/assets/commonScript/common/tm_game_wapper.js"],"names":["window","tm","GameWapper","cc","Class","extends","Component","properties","gameId","default","type","Integer","ctor","onLoad","game","appMgr","getGame","onShow","node","active","onHide","onCloseFunc","onDestroy","notifierCenter","ignoreScope","trigger","msg","opt_params","apply","arguments","register","cmd","handler","scoper","listenMsg","protocolName","requestMsg","params","getModel","ignoreMsg","httpGet","url","callback","netHttpCore","get","httpPost","post","onVoid","module","exports"],"mappings":"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","file":"tm_game_wapper.js","sourceRoot":"../../../../../assets/commonScript/common","sourcesContent":["/**\n *\n * 经常用到的API,封装，类似语法冰糖\n *\n */\n\nwindow.tm = window.tm || {};\n\ntm.GameWapper = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        gameId:{\n            default: 888,\n            type: cc.Integer\n        }\n    },\n\n    ctor:function () {\n\n    },\n\n    onLoad:function () {\n        this.game = tm.appMgr.getGame(this.gameId);\n    },\n\n    onShow: function () {\n        this.node.active = true;\n    },\n\n    onHide: function () {\n        this.node.active = false;\n    },\n\n    onCloseFunc: function () {\n        this.onHide();\n    },\n\n    onDestroy(){\n        if(tm.notifierCenter){\n            tm.notifierCenter.ignoreScope(this);\n        }\n\n        if(this.game){\n            this.game.ignoreScope(this);\n        }\n\n        this.game = null;\n    },\n\n    /**\n     * 触发一个事件\n     * @param msg\n     * @param opt_params\n     */\n    trigger: function (msg, opt_params) {\n        this.game.trigger.apply(this.game, arguments);\n    },\n\n    /**\n     * 监听一个事件\n     * @param cmd\n     * @param handler\n     * @param scoper\n     */\n    register: function (cmd, handler, scoper) {\n        this.game.register(cmd, handler, scoper);\n    },\n\n    /**\n     * 监听服务器返回消息\n     * @param protocolName\n     * @param handler\n     * @param scoper\n     */\n    listenMsg: function(protocolName, handler, scoper){\n        this.game.listenMsg(protocolName, handler, scoper);\n    },\n\n    /**\n     * 请求消息\n     *\n     * @param protocolName\n     * @param params\n     */\n    requestMsg: function(protocolName, params){\n        this.game.requestMsg(protocolName, params);\n    },\n\n\n    getModel: function(protocolName){\n        if(!this.game){\n            return;\n        }\n        return this.game.getModel(protocolName);\n    },\n\n    /**\n     * 取消监听服务器返回消息\n     * @param protocolName\n     * @param handler\n     * @param scoper\n     */\n    ignoreMsg: function(protocolName, handler, scoper){\n        this.game.ignoreMsg(protocolName, handler, scoper);\n    },\n\n    /***************************Http Api****************************/\n\n    httpGet:function(url, params, callback, scoper){\n        tm.netHttpCore.get(url, params, callback, scoper);\n    },\n\n    httpPost:function(url, params, callback, scoper){\n        tm.netHttpCore.post(url, params, callback, scoper);\n    },\n    \n    onVoid:function () {\n        \n    }\n});\n\nmodule.exports = tm.GameWapper;"]}