{"version":3,"sources":["../../../../../../../assets/lcGame/scripts/items/container/assets/lcGame/scripts/items/container/lc_game_container.js"],"names":["window","lc","Container","cc","Class","extends","require","properties","logicX","visible","get","_logicX","logicY","_logicY","itemNode","Node","_itemList","ctor","_itemType","GameType","ItemType","onLoad","_super","start","addItemByType","type","item","game","itemFactory","createItemByType","priority","old","destroy","addChild","getItemList","list","forEach","value","itemType","push","tm","LOGD","setPos","pos","x","y","node","setPosition","addComByType","clazz","comFactory","createComByType","com","init","_comMap","LOGE","removeComByType","setContainer","info","isOpen","items","container","i","length","isInTouch","location","bound","getBoundingBoxToWorld","contains","isDead","isCanChance","flag","last","logic","getComponent","checkIsSamePos","getCurType","checkIsSameType","curr","cType","checkIsInArea","ele","ax","ay","bx","by","getNextRotation","rotation","dropTo","posX","posY","runAction","moveBy","v2","easing","easeBackIn","onBeat","onCrash","onRemove","pop","onCrashed"],"mappings":"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","file":"lc_game_container.js","sourceRoot":"../../../../../../../assets/lcGame/scripts/items/container","sourcesContent":["/**\n * 游戏元素：容器\n */\nwindow.lc = window.lc || {};\n\nlc.Container = cc.Class({\n    extends: require(\"../lc_game_item_base\"),\n\n    properties: {\n        logicX: {\n            visible: false,\n            get: function () {\n                return this._logicX;\n            }\n        }, // 物体的逻辑坐标X\n\n        logicY:  {\n            visible: false,\n            get: function () {\n                return this._logicY;\n            }\n        }, // 物体的逻辑坐标Y\n\n        itemNode: cc.Node, // 元素节点\n        _itemList: null,\n    },\n\n    ctor () {\n        this._itemList = [];\n        this._itemType = lc.GameType.ItemType.Container;\n    },\n\n    onLoad () {\n        this._super();\n    },\n\n    start () {\n\n    },\n\n    /**\n     * 添加一个元素\n     * 不重复添加同一种元素\n     * 有限制直接按照数组队列插入\n     * 如果已经存在就删除\n     * Priority 元素优先级是在工厂里赋值的，\n     * 直接继承itembase有个bug\n     * @param item\n     */\n    addItemByType (type) {\n        let item = this.game.itemFactory.createItemByType(type);\n        if(item) {\n            let priority = item.priority;\n            let old = this._itemList[priority];\n            if(old) {\n                old.destroy();\n                old = null;\n            }\n\n            this._itemList[priority] = item;\n            this.itemNode.addChild(item, priority);\n        }\n    },\n\n    /**\n     * 获取容器中现存的类型列表\n     */\n    getItemList () {\n        let list = [];\n        this._itemList.forEach((value)=> {\n            let type = value.itemType;\n            if(type) {\n                list.push(type);\n            } else {\n                tm.LOGD(\"地图类型不存在：\", type);\n            }\n\n        });\n\n        return list;\n    },\n\n    /**\n     * 设置物体的坐标\n     * @private\n     */\n    setPos (pos, x, y) {\n        this._logicX = x;\n        this._logicY = y;\n\n        this.node.setPosition(pos.x, pos.y);\n    },\n\n    /**\n     * 添加组件\n     */\n    addComByType (type) {\n        let clazz = this.game.comFactory.createComByType(type);\n        if(clazz) {\n            let com = new clazz();\n            com.item = this;\n            com.init();\n\n            this._comMap[type] = com;\n        } else {\n            tm.LOGE(false, 'addComByType error : ' + type);\n        }\n\n    },\n\n    /**\n     * 移除组件\n     */\n    removeComByType (type) {\n        let com = this._comMap[type];\n        if(com) {\n            com.destroy();\n            com = null;\n            delete this._comMap[type];\n        }\n    },\n\n    /**\n     * 通过数据\n     * 设置容器\n     * @param info\n     */\n    setContainer (info) {\n        if(info.isOpen) {\n            let items = info.container;\n            for (let i = 0; i < items.length; i++) {\n                this.addItemByType(items[i]);\n            }\n        }\n    },\n\n    /**\n     * 是否被点击\n     * @param location\n     * @returns {*}\n     */\n    isInTouch (location) {\n        let bound = this.node.getBoundingBoxToWorld();\n        return  bound.contains(location) ? this.node : null;\n    },\n\n    /**\n     * 是否死亡\n     * 条件是当前容器是否还有元素\n     * @returns {boolean}\n     */\n    isDead () {\n      return this._itemList.length == 0;\n    },\n\n    /**\n     * 是否可以选择\n     * 从容器存储的尾部\n     * 开始获取他是否有\n     * 可选择组件，如果有的话，\n     * 判断是否开启了选择组件。\n     */\n    isCanChance () {\n        let flag = false;\n        let last = this._itemList[this._itemList.length - 1];\n\n        if(last) {\n            let logic = last.getComponent('lc_game_item_base');\n            flag = logic.isCanChance();\n        }\n\n        return flag;\n    },\n\n    /**\n     * 是否在相同的位置\n     * @param x\n     * @param y\n     * @returns {boolean}\n     */\n    checkIsSamePos (x, y){\n        if(x == this._logicX && y == this._logicY){\n            return true;\n        }\n\n        return false;\n    },\n\n    /**\n     * 获取当前类型\n     */\n    getCurType () {\n        let type = null;\n        let last = this._itemList[this._itemList.length - 1];\n        if(last) {\n            let logic = last.getComponent('lc_game_item_base');\n            type = logic.ItemType;\n        }\n\n        return type;\n    },\n\n    /**\n     * 是否是同一类型\n     * @param type\n     * @returns {boolean}\n     */\n    checkIsSameType (curr) {\n        let flag = false;\n        let cType = curr.getCurType();\n        let last = this._itemList[this._itemList.length - 1];\n\n        if(last) {\n            let logic = last.getComponent('lc_game_item_base');\n            flag = (cType == logic.ItemType);\n        }\n\n        return flag;\n    },\n\n    /**\n     * 是否在区域内\n     * @param ele\n     * @returns {boolean}\n     */\n    checkIsInArea (ele) {\n        let flag = false;\n        let ax = ele.logicX;\n        let ay = ele.logicY;\n\n        let bx = this.logicX;\n        let by = this.logicY;\n\n        if(((ax - 1) == bx && (ay + 1) == by) //左上\n            || ((ax) == bx && (ay + 1) == by ) //上\n            || ((ax + 1) == bx && (ay + 1) == by) //右上\n            || ((ax - 1) == bx && (ay) == by) //左\n            || ((ax + 1) == bx && (ay) == by) //右\n            || ((ax - 1) == bx && (ay - 1) == by) //左下\n            || ((ax) == bx && (ay - 1) == by) //下\n            || ((ax + 1) == bx && (ay - 1) == by)) //右下\n            {\n            flag = true;\n        }\n\n        return flag;\n    },\n\n    /**\n     * 获取下一个元素与自己的旋转\n     * @param ele\n     * @returns {number}\n     */\n    getNextRotation (ele) {\n        let rotation = 0;\n        let ax = ele.logicX;\n        let ay = ele.logicY;\n\n        let bx = this.logicX;\n        let by = this.logicY;\n\n        // 上\n        if ((ax) == bx && (ay + 1) == by) {\n            rotation = 180;\n        }\n\n        // 右上\n        else if ((ax + 1) == bx && (ay + 1) == by) {\n            rotation = 225;\n        }\n\n        // 右\n        else if ((ax + 1) == bx && (ay) == by) {\n            rotation = 270;\n        }\n\n        // 右下\n        else if ((ax + 1) == bx && (ay - 1) == by) {\n            rotation = 315;\n        }\n\n        // 下\n        else if ((ax) == bx && (ay - 1) == by) {\n            rotation = 0;\n        }\n\n        // 左下\n        else if ((ax - 1) == bx && (ay - 1) == by) {\n            rotation = 45;\n        }\n\n        // 左\n        else if ((ax - 1) == bx && (ay) == by) {\n            rotation = 90;\n        }\n\n        // 左上\n        else if ((ax - 1) == bx && (ay + 1) == by) {\n            rotation = 135;\n        }\n\n        return rotation;\n    },\n\n    /**\n     * 下落\n     * @param y\n     * @param posX\n     * @param posY\n     */\n    dropTo (y, posX, posY) {\n        this._logicY = y;\n        this.node.runAction(cc.moveBy(0.5, cc.v2(posX, -posY)).easing(cc.easeBackIn()));\n    },\n\n    /**\n     * 被打击\n     * 选中后消除\n     */\n    onBeat () {\n        let last = this._itemList[this._itemList.length - 1];\n\n        if(last) {\n            let logic = last.getComponent('lc_game_item_base');\n            if(logic.onBeat()) {\n                this.onCrash();\n                this.onRemove();\n            }\n        }\n    },\n\n    /**\n     * 移除组件\n     * 如果成功\n     * 移除最后\n     * 元素\n     */\n    onRemove () {\n        let last = this._itemList[this._itemList.length - 1];\n\n        if(last) {\n            let logic = last.getComponent('lc_game_item_base');\n            if(logic.onRemove()) {\n                last.destroy();\n                last = null;\n\n                this._itemList.pop();\n            }\n        }\n    },\n\n    /**\n     * 撞击\n     * @private\n     */\n    onCrash () {\n        let last = this._itemList[this._itemList.length - 1];\n        if(last) {\n            let info = {\n                'x': this._logicX,\n                'y': this._logicY,\n            };\n\n            let logic = last.getComponent('lc_game_item_base');\n            logic.onCrash(info)\n        }\n    },\n\n    /**\n     * 撞击\n     * 消除后被溅射\n     */\n    onCrashed () {\n        let last = this._itemList[this._itemList.length - 1];\n        if(last) {\n            let logic = last.getComponent('lc_game_item_base');\n            if(logic.onCrashed()){\n                this.onRemove();\n            }\n        }\n    }\n\n\n});\n"]}