{"version":3,"sources":["../../../../../assets/commonScript/component/assets/commonScript/component/tm_common_sm_hint.js"],"names":["cc","Class","extends","Component","properties","lbl_hint","Label","spr_bg","Node","duration","default","type","Float","minWidth","Integer","onLoad","tm","notifierCenter","register","Event","EVT_POP_COMMON_SM_HINT","preShow","_aniCtrl","getComponent","Animation","node","active","arg","scheduleOnce","onShowHint","hintTime","js","isString","string","w","width","Math","max","play","unschedule","onHide","onDestroy","ignoreScope"],"mappings":";;;;;;AAAA;;;AAGA;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAASL,GAAGM,KADJ;AAERC,gBAAOP,GAAGQ,IAFF;;AAIRC,kBAAS;AACLC,qBAAQ,CADH;AAELC,kBAAKX,GAAGY;AAFH,SAJD;;AASRC,kBAAS;AACLH,qBAAS,GADJ;AAELC,kBAAKX,GAAGc;AAFH;AATD,KAHP;;AAkBL;;AAEAC,UApBK,oBAoBK;AACNC,WAAGC,cAAH,CAAkBC,QAAlB,CAA2BF,GAAGG,KAAH,CAASC,sBAApC,EAA4D,KAAKC,OAAjE,EAA0E,IAA1E;AACA,aAAKC,QAAL,GAAgB,KAAKC,YAAL,CAAkBvB,GAAGwB,SAArB,CAAhB;AACA,aAAKC,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH,KAxBI;AA0BLL,WA1BK,mBA0BGM,GA1BH,EA0BO;AACP,aAAKC,YAAL,CAAkB,YAAY;AAC1B,iBAAKC,UAAL,CAAgBF,GAAhB;AACH,SAFD,EAEE,CAFF;AAGJ,KA9BI;AAgCLE,cAhCK,sBAgCMF,GAhCN,EAgCU;AACX,YAAG,CAACA,GAAJ,EAAQ;AACJ;AACH;;AAED,YAAIG,WAAW,KAAKrB,QAApB;AACA,YAAGT,GAAG+B,EAAH,CAAMC,QAAN,CAAeL,GAAf,CAAH,EAAuB;AACnB,iBAAKtB,QAAL,CAAc4B,MAAd,GAAuBN,OAAO,EAA9B;AACH,SAFD,MAEM;AACFG,uBAAWH,IAAI,IAAJ,CAAX;AACA,iBAAKtB,QAAL,CAAc4B,MAAd,GAAuBN,IAAI,KAAJ,KAAc,EAArC;AACH;;AAED,YAAIO,IAAI,KAAK7B,QAAL,CAAcoB,IAAd,CAAmBU,KAA3B;;AAEAD,YAAIE,KAAKC,GAAL,CAASH,CAAT,EAAW,KAAKrB,QAAhB,CAAJ;AACA,aAAKN,MAAL,CAAY4B,KAAZ,GAAoBD,IAAI,GAAxB;;AAEA,aAAKT,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA;AACA,aAAKJ,QAAL,CAAcgB,IAAd,CAAmB,qBAAnB;;AAEA,aAAKC,UAAL,CAAgB,KAAKC,MAArB;AACA,aAAKZ,YAAL,CAAkB,KAAKY,MAAvB,EAA+BV,QAA/B;AACH,KAxDI;AA0DLW,aA1DK,uBA0DM;AACPzB,WAAGC,cAAH,CAAkByB,WAAlB,CAA8B,IAA9B;AACH,KA5DI;AA8DLF,UA9DK,oBA8DK;AACN,aAAKlB,QAAL,CAAcgB,IAAd,CAAmB,qBAAnB;AACH;AAhEI;;AAkEL;AAlEJ","file":"tm_common_sm_hint.js","sourceRoot":"../../../../../assets/commonScript/component","sourcesContent":["/*\n * 通用提示弹框\n */\n// tm.notifierCenter.trigger(tm.Event.EVT_POP_COMMON_SM_HINT, tm.String.NO_NETWORK_HINT);\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        lbl_hint:cc.Label,\n        spr_bg:cc.Node,\n\n        duration:{\n            default:2,\n            type:cc.Float\n        },\n\n        minWidth:{\n            default: 350,\n            type:cc.Integer\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        tm.notifierCenter.register(tm.Event.EVT_POP_COMMON_SM_HINT, this.preShow, this);\n        this._aniCtrl = this.getComponent(cc.Animation);\n        this.node.active = false;\n    },\n\n    preShow(arg){\n         this.scheduleOnce(function () {\n             this.onShowHint(arg);\n         },0);\n    },\n\n    onShowHint(arg){\n        if(!arg){\n            return;\n        }\n\n        var hintTime = this.duration;\n        if(cc.js.isString(arg)){\n            this.lbl_hint.string = arg || \"\";\n        }else {\n            hintTime = arg['dt'];\n            this.lbl_hint.string = arg['str'] || \"\";\n        }\n\n        let w = this.lbl_hint.node.width;\n\n        w = Math.max(w,this.minWidth);\n        this.spr_bg.width = w + 200;\n\n        this.node.active = true;\n        //show ani\n        this._aniCtrl.play(\"common_sm_hint_show\");\n\n        this.unschedule(this.onHide);\n        this.scheduleOnce(this.onHide, hintTime);\n    },\n\n    onDestroy(){\n        tm.notifierCenter.ignoreScope(this);\n    },\n\n    onHide () {\n        this._aniCtrl.play(\"common_sm_hint_hide\");\n    },\n\n    // update (dt) {},\n});\n"]}