{"version":3,"sources":["../../../../../../assets/lcGame/scripts/scenes/assets/lcGame/scripts/scenes/lc_load_scene.js"],"names":["cc","Class","extends","Component","properties","_loadIndex","_resList","onLoad","lc","game","asssetMgr","getResList","length","preLoadRes","res","loader","loadRes","url","type","err","resource","error","message","Prefab","addPrefab","tm","notifierCenter","trigger","Event","EVT_RES_RELOAD_FINISH","sceneMgr","preloadScene","LOGD"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAY,CADJ,EACO;AACfC,kBAAU,IAFF,CAEQ;AAFR,KAHP;;AAQLC,YAAQ,kBAAY;AAChB,aAAKD,QAAL,GAAgBE,GAAGC,IAAH,CAAQC,SAAR,CAAkBC,UAAlB,EAAhB;AACA,YAAG,KAAKL,QAAL,IAAiB,KAAKA,QAAL,CAAcM,MAAlC,EAA0C;AACtC,iBAAKC,UAAL;AACH;AACJ,KAbI;;AAeL;;;AAGAA,gBAAY,sBAAW;AAAA;;AACnB,YAAIC,MAAM,KAAKR,QAAL,CAAc,KAAKD,UAAnB,CAAV;AACAL,WAAGe,MAAH,CAAUC,OAAV,CAAkBF,IAAIG,GAAtB,EAA2BH,IAAII,IAA/B,EAAqC,UAACC,GAAD,EAAMC,QAAN,EAAmB;AACpD,gBAAGD,GAAH,EAAQ;AACJnB,mBAAGqB,KAAH,CAASF,IAAIG,OAAJ,IAAeH,GAAxB;AACA;AACH;;AAED,gBAAIL,IAAII,IAAJ,KAAalB,GAAGuB,MAApB,EAA4B;AACxBf,mBAAGC,IAAH,CAAQC,SAAR,CAAkBc,SAAlB,CAA4BV,IAAIG,GAAhC,EAAqCG,QAArC;AACH;;AAED,kBAAKf,UAAL;;AAEA,gBAAI,MAAKA,UAAL,GAAkB,MAAKC,QAAL,CAAcM,MAApC,EAA4C;AACxC,sBAAKC,UAAL;AACH,aAFD,MAGK;AACDY,mBAAGC,cAAH,CAAkBC,OAAlB,CAA0BF,GAAGG,KAAH,CAASC,qBAAnC;AACAJ,mBAAGK,QAAH,CAAYC,YAAZ,CAAyB,eAAzB;AACA;AACAN,mBAAGO,IAAH,CAAQ,IAAR,EAAc,MAAd;AACH;AACJ,SArBD;AAsBH;;AA1CI,CAAT","file":"lc_load_scene.js","sourceRoot":"../../../../../../assets/lcGame/scripts/scenes","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _loadIndex: 0, // 当前index\n        _resList: null, // 资源列表\n    },\n\n    onLoad: function () {\n        this._resList = lc.game.asssetMgr.getResList();\n        if(this._resList && this._resList.length) {\n            this.preLoadRes();\n        }\n    },\n\n    /*\n     * 预加载资源\n     */\n    preLoadRes: function() {\n        let res = this._resList[this._loadIndex];\n        cc.loader.loadRes(res.url, res.type, (err, resource) => {\n            if(err) {\n                cc.error(err.message || err);\n                return;\n            }\n\n            if (res.type === cc.Prefab) {\n                lc.game.asssetMgr.addPrefab(res.url, resource);\n            }\n\n            this._loadIndex ++;\n\n            if (this._loadIndex < this._resList.length) {\n                this.preLoadRes();\n            }\n            else {\n                tm.notifierCenter.trigger(tm.Event.EVT_RES_RELOAD_FINISH);\n                tm.sceneMgr.preloadScene(\"lc_game_scene\");\n                //tm.sceneMgr.preloadScene(\"lc_edit_scene\");\n                tm.LOGD(true, \"进入游戏\");\n            }\n        }); \n    },\n\n});\n"]}