{"version":3,"sources":["../../../../../../assets/lcGame/scripts/items/assets/lcGame/scripts/items/lc_game_item_base.js"],"names":["window","lc","ItemBase","cc","Class","extends","tm","GameWapper","properties","comNode","Node","spf","SpriteFrame","crashToType","visible","default","GameEnum","CrashToType","Invalid","type","crashCount","_comMap","Priority","get","_itemPriority","ItemType","_itemType","ctor","GamePriority","GameType","onLoad","_super","initUseCom","onDestroy","_removeAllCom","key","oneCom","destroy","addComByType","clazz","game","comFactory","createComByType","com","item","init","LOGE","removeComByType","isCanChance","_doComLogicByType","ComType","Chance","onBeat","Beat","onRemove","Remove","onCrash","info","Crash","onCrashed","Crashed","flag","doLogic","setPos","x","y","node","setPosition"],"mappings":";;;;;;AAAA;;;AAGAA,OAAOC,EAAP,GAAYD,OAAOC,EAAP,IAAa,EAAzB;AACAA,GAAGC,QAAH,GAAcC,GAAGC,KAAH,CAAS;AACnBC,aAASC,GAAGC,UADO;;AAGnBC,gBAAY;AACRC,iBAASN,GAAGO,IADJ,EACU;AAClBC,aAAK,CAACR,GAAGS,WAAJ,CAFG,EAEe;AACvBC,qBAAa,EAAE;AACXC,qBAAS,IADA;AAETC,qBAASd,GAAGe,QAAH,CAAYC,WAAZ,CAAwBC,OAFxB;AAGTC,kBAAMlB,GAAGe,QAAH,CAAYC;AAHT,SAHL;;AASRG,oBAAY,CATJ,EASO;;AAEfC,iBAAS,IAXD,EAWO;;AAEfC,kBAAU;AACNR,qBAAS,KADH;AAENS,iBAAK,eAAY;AACb,uBAAO,KAAKC,aAAZ;AACH;AAJK,SAbF,EAkBL;;AAEHC,kBAAU;AACNX,qBAAS,KADH;AAENS,iBAAK,eAAY;AACb,uBAAO,KAAKG,SAAZ;AACH;AAJK,SApBF,CAyBL;;AAzBK,KAHO;;AAgCnBC,QAhCmB,kBAgCX;AACJ,aAAKH,aAAL,GAAqBvB,GAAG2B,YAAH,CAAgBV,OAArC;AACA,aAAKQ,SAAL,GAAiBzB,GAAG4B,QAAH,CAAYJ,QAAZ,CAAqBP,OAAtC;AACH,KAnCkB;AAqCnBY,UArCmB,oBAqCT;AACN,aAAKC,MAAL;AACA,aAAKV,OAAL,GAAe,EAAf;AACA,aAAKW,UAAL;AAEH,KA1CkB;AA4CnBC,aA5CmB,uBA4CR;AACP,aAAKC,aAAL;;AAEA,aAAKH,MAAL;AACH,KAhDkB;;;AAkDnB;;;;AAIAG,iBAtDmB,2BAsDF;AACb,aAAK,IAAIC,GAAT,IAAgB,KAAKd,OAArB,EAA8B;AAC1B,gBAAIe,SAAS,KAAKf,OAAL,CAAac,GAAb,CAAb;AACA,gBAAGC,MAAH,EAAW;AACPA,uBAAOC,OAAP;AACH;AACJ;AACJ,KA7DkB;;;AA+DnB;;;AAGAL,gBAAY,sBAAY;AACpB;AACH,KApEkB;;AAsEnB;;;AAGAM,gBAzEmB,wBAyELnB,IAzEK,EAyEC;AAChB,YAAIoB,QAAQ,KAAKC,IAAL,CAAUC,UAAV,CAAqBC,eAArB,CAAqCvB,IAArC,CAAZ;AACA,YAAGoB,KAAH,EAAU;AACN,gBAAII,MAAM,IAAIJ,KAAJ,EAAV;AACAI,gBAAIC,IAAJ,GAAW,IAAX;AACAD,gBAAIE,IAAJ;;AAEA,iBAAKxB,OAAL,CAAaF,IAAb,IAAqBwB,GAArB;AACH,SAND,MAMO;AACHrC,eAAGwC,IAAH,CAAQ,KAAR,EAAe,0BAA0B3B,IAAzC;AACH;AAEJ,KArFkB;;;AAuFnB;;;AAGA4B,mBA1FmB,2BA0FF5B,IA1FE,EA0FI,CAEtB,CA5FkB;;;AA8FnB;;;AAGA6B,eAjGmB,yBAiGJ;AACX,eAAO,KAAKC,iBAAL,CAAuBhD,GAAG4B,QAAH,CAAYqB,OAAZ,CAAoBC,MAA3C,CAAP;AACH,KAnGkB;AAqGnBC,UArGmB,oBAqGT;AACN,eAAO,KAAKH,iBAAL,CAAuBhD,GAAG4B,QAAH,CAAYqB,OAAZ,CAAoBG,IAA3C,CAAP;AACH,KAvGkB;AAyGnBC,YAzGmB,sBAyGP;AACR,eAAO,KAAKL,iBAAL,CAAuBhD,GAAG4B,QAAH,CAAYqB,OAAZ,CAAoBK,MAA3C,CAAP;AACH,KA3GkB;;;AA6GnB;;;;AAIAC,WAjHmB,mBAiHVC,IAjHU,EAiHJ;AACX,eAAO,KAAKR,iBAAL,CAAuBhD,GAAG4B,QAAH,CAAYqB,OAAZ,CAAoBQ,KAA3C,EAAkDD,IAAlD,CAAP;AACH,KAnHkB;;;AAqHnB;;;;AAIAE,aAzHmB,uBAyHN;AACT,eAAO,KAAKV,iBAAL,CAAuBhD,GAAG4B,QAAH,CAAYqB,OAAZ,CAAoBU,OAA3C,CAAP;AACH,KA3HkB;AA6HnBX,qBA7HmB,6BA6HA9B,IA7HA,EA6HMsC,IA7HN,EA6HY;AAC3B,YAAII,OAAO,KAAX;AACA,YAAIlB,MAAM,KAAKtB,OAAL,CAAaF,IAAb,CAAV;AACA,YAAGwB,GAAH,EAAQ;AACJkB,mBAAOlB,IAAImB,OAAJ,CAAYL,IAAZ,CAAP;AACH;;AAED,eAAOI,IAAP;AACH,KArIkB;;;AAuInB;;;;AAIAE,UA3ImB,kBA2IXC,CA3IW,EA2IRC,CA3IQ,EA2IL;AACV,aAAKC,IAAL,CAAUC,WAAV,CAAsBH,CAAtB,EAAyBC,CAAzB;AACH;AA7IkB,CAAT,CAAd","file":"lc_game_item_base.js","sourceRoot":"../../../../../../assets/lcGame/scripts/items","sourcesContent":["/**\n * 游戏元素：元素父类 -- 所有东西都继承他\n */\nwindow.lc = window.lc || {};\nlc.ItemBase = cc.Class({\n    extends: tm.GameWapper,\n\n    properties: {\n        comNode: cc.Node, // 组件的节点\n        spf: [cc.SpriteFrame], // 贴图\n        crashToType: { // 爆炸朝向\n            visible: true,\n            default: lc.GameEnum.CrashToType.Invalid,\n            type: lc.GameEnum.CrashToType\n        },\n\n        crashCount: 1, // 爆炸关联数量\n\n        _comMap: null, // 组件列表\n\n        Priority: {\n            visible: false,\n            get: function () {\n                return this._itemPriority;\n            }\n        }, // 优先级\n\n        ItemType: {\n            visible: false,\n            get: function () {\n                return this._itemType;\n            }\n        }, // 物体类型\n\n    },\n\n    ctor () {\n        this._itemPriority = lc.GamePriority.Invalid;\n        this._itemType = lc.GameType.ItemType.Invalid;\n    },\n\n    onLoad () {\n        this._super();\n        this._comMap = {};\n        this.initUseCom();\n\n    },\n\n    onDestroy(){\n        this._removeAllCom();\n\n        this._super();\n    },\n\n    /**\n     * 移除所有组件\n     * @private\n     */\n    _removeAllCom () {\n        for (let key in this._comMap) {\n            let oneCom = this._comMap[key];\n            if(oneCom) {\n                oneCom.destroy();\n            }\n        }\n    },\n\n    /**\n     * 初始化组件\n     */\n    initUseCom: function () {\n        return;\n    },\n\n    /**\n     * 添加组件\n     */\n    addComByType (type) {\n        let clazz = this.game.comFactory.createComByType(type);\n        if(clazz) {\n            let com = new clazz();\n            com.item = this;\n            com.init();\n\n            this._comMap[type] = com;\n        } else {\n            tm.LOGE(false, 'addComByType error : ' + type);\n        }\n\n    },\n\n    /**\n     * 移除组件\n     */\n    removeComByType (type) {\n\n    },\n\n    /**\n     * 是否可选择\n     */\n    isCanChance () {\n        return this._doComLogicByType(lc.GameType.ComType.Chance);\n    },\n\n    onBeat () {\n        return this._doComLogicByType(lc.GameType.ComType.Beat);\n    },\n\n    onRemove () {\n        return this._doComLogicByType(lc.GameType.ComType.Remove);\n    },\n\n    /**\n     * 是否可以爆炸\n     * @returns\n     */\n    onCrash (info) {\n        return this._doComLogicByType(lc.GameType.ComType.Crash, info);\n    },\n\n    /**\n     * 是否可以被爆炸\n     * @returns\n     */\n    onCrashed () {\n        return this._doComLogicByType(lc.GameType.ComType.Crashed);\n    },\n\n    _doComLogicByType (type, info) {\n        let flag = false;\n        let com = this._comMap[type];\n        if(com) {\n            flag = com.doLogic(info);\n        }\n\n        return flag;\n    },\n\n    /**\n     * 设置物体的坐标\n     * @private\n     */\n    setPos (x, y) {\n        this.node.setPosition(x, y);\n    },\n\n});\n\n"]}