{"version":3,"sources":["../../../../../../../assets/lcGame/scripts/layers/gameArea/assets/lcGame/scripts/layers/gameArea/lc_layer_map.js"],"names":["cc","Class","extends","tm","GameWapper","properties","_startX","_startY","_curLevelInfo","_mapList","mapNode","Node","onLoad","_super","getContentSize","width","height","_parseInfo","game","levelMgr","getLevelInfo","_createMap","oneWidth","oneHeight","col","length","oneCol","raw","oneMapInfo","x","y","oneMap","mapMgr","createMapByType","lc","GameType","ItemType","Map","mLogic","getComponent","addChild","setPos","setMap"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACLC,aAASC,GAAGC,UADP;;AAGLC,gBAAY;AACRC,iBAAS,CADD,EACI;AACZC,iBAAS,CAFD,EAEI;;;AAGZC,uBAAe,IALP,EAKa;AACrBC,kBAAU,IANF;;AAQR;AACAC,iBAASV,GAAGW;AATJ,KAHP;;AAeLC,UAfK,oBAeK;AACN,aAAKC,MAAL;AACA,aAAKJ,QAAL,GAAgB,EAAhB;AACA,aAAKH,OAAL,GAAe,CAAC,KAAKI,OAAL,CAAaI,cAAb,GAA8BC,KAA/B,GAAuC,CAAtD;AACA,aAAKR,OAAL,GAAe,EAAE,KAAKG,OAAL,CAAaI,cAAb,GAA8BE,MAA9B,GAAuC,EAAzC,CAAf;;AAEA,aAAKC,UAAL;AACH,KAtBI;;;AAwBLA,gBAAY,sBAAa;AACrB,aAAKT,aAAL,GAAqB,KAAKU,IAAL,CAAUC,QAAV,CAAmBC,YAAnB,EAArB;AACA,aAAKC,UAAL;AACH,KA3BI;;AA6BL;;;;AAIAA,gBAAY,sBAAY;AACpB,YAAIC,WAAY,EAAhB;AACA,YAAIC,YAAY,EAAhB;AACA,aAAK,IAAIC,MAAM,CAAf,EAAkBA,MAAO,KAAKhB,aAAL,CAAmBiB,MAA5C,EAAoDD,KAApD,EAA2D;AACvD,iBAAKf,QAAL,CAAce,GAAd,IAAqB,EAArB;AACA,gBAAIE,SAAS,KAAKlB,aAAL,CAAmBgB,GAAnB,CAAb;AACA,gBAAGE,MAAH,EAAW;AACP,qBAAK,IAAIC,MAAM,CAAf,EAAkBA,MAAMD,OAAOD,MAA/B,EAAuCE,KAAvC,EAA+C;AAC3C,wBAAIC,aAAaF,OAAOC,GAAP,CAAjB;;AAEA,wBAAIE,IAAI,KAAKvB,OAAL,GAAegB,WAAW,CAA1B,GAA8BA,WAAWE,GAAjD;AACA,wBAAIM,IAAI,KAAKvB,OAAL,GAAegB,YAAYI,GAAnC;;AAEA;AACA,wBAAII,SAAS,KAAKb,IAAL,CAAUc,MAAV,CAAiBC,eAAjB,CAAiCC,GAAGC,QAAH,CAAYC,QAAZ,CAAqBC,GAAtD,CAAb;AACA,wBAAIC,SAASP,OAAOQ,YAAP,CAAoB,aAApB,CAAb;;AAEA,yBAAK7B,OAAL,CAAa8B,QAAb,CAAsBT,MAAtB;;AAEAO,2BAAOG,MAAP,CAAcZ,CAAd,EAAiBC,CAAjB;AACAQ,2BAAOI,MAAP,CAAcd,UAAd;;AAEA,yBAAKnB,QAAL,CAAce,GAAd,EAAmBG,GAAnB,IAA0BI,MAA1B;AACH;AACJ;AACJ;AACJ;;AA3DI,CAAT","file":"lc_layer_map.js","sourceRoot":"../../../../../../../assets/lcGame/scripts/layers/gameArea","sourcesContent":["/**\n * 游戏元素 -- 游戏区域\n *\n */\ncc.Class({\n    extends: tm.GameWapper,\n\n    properties: {\n        _startX: 0, // 初始化x坐标\n        _startY: 0, // 初始化y坐标\n\n\n        _curLevelInfo: null, // 当前地图数据\n        _mapList: null,\n\n        // creator\n        mapNode: cc.Node,\n    },\n\n    onLoad () {\n        this._super();\n        this._mapList = [];\n        this._startX = -this.mapNode.getContentSize().width / 2;\n        this._startY = -(this.mapNode.getContentSize().height - 45) ;\n\n        this._parseInfo();\n    },\n\n    _parseInfo: function  () {\n        this._curLevelInfo = this.game.levelMgr.getLevelInfo();\n        this._createMap();\n    },\n\n    /**\n     * 创建地图\n     * @private\n     */\n    _createMap: function () {\n        let oneWidth  = 81;\n        let oneHeight = 81;\n        for (let col = 0; col <  this._curLevelInfo.length; col++) {\n            this._mapList[col] = [];\n            let oneCol = this._curLevelInfo[col];\n            if(oneCol) {\n                for (let raw = 0; raw < oneCol.length; raw ++) {\n                    let oneMapInfo = oneCol[raw];\n\n                    let x = this._startX + oneWidth / 2 + oneWidth * col;\n                    let y = this._startY + oneHeight * raw;\n\n                    // 地图\n                    let oneMap = this.game.mapMgr.createMapByType(lc.GameType.ItemType.Map);\n                    let mLogic = oneMap.getComponent('lc_game_map');\n\n                    this.mapNode.addChild(oneMap);\n\n                    mLogic.setPos(x, y);\n                    mLogic.setMap(oneMapInfo);\n\n                    this._mapList[col][raw] = oneMap;\n                }\n            }\n        }\n    }\n\n});\n"]}