{"version":3,"sources":["tm_spr_web_image.js"],"names":["cc","Class","extends","Component","properties","_bDestroy","sprImg","default","type","Sprite","url","get","_url","set","loadImage","ctor","onLoad","onDestroy","setUrl","getUrl","loadCallBack","error","tex","updateSf","spriteFrame","SpriteFrame","node","active","sys","isNative","texture","loader","getRes","load","bind"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAW,KADH;;AAGRC,gBAAO;AACHC,qBAAQ,IADL;AAEHC,kBAAKR,GAAGS;AAFL,SAHC;;AAQRC,aAAI;AACAC,iBAAK,eAAY;AACb,uBAAO,KAAKC,IAAZ;AACH,aAHD;;AAKAC,iBAAI,aAAUH,GAAV,EAAe;AACf,oBAAG,CAACA,GAAD,IAAQ,KAAKE,IAAL,IAAaF,GAAxB,EAA4B;AACxB;AACH;AACD,qBAAKE,IAAL,GAAYF,GAAZ;;AAEA,qBAAKI,SAAL;AACH;AAZD;AARI,KAHP;;AA2BL;;AAEAC,UAAM,gBAAY;;AAEd,aAAKV,SAAL,GAAiB,KAAjB;AACH,KAhCI;;AAkCLW,UAlCK,oBAkCK,CAET,CApCI;;;AAsCLC,eAAU,qBAAY;AAClB,aAAKZ,SAAL,GAAiB,IAAjB;AACH,KAxCI;;AA0CLa,UA1CK,kBA0CGR,GA1CH,EA0CQ;AACT,YAAG,KAAKE,IAAL,IAAaF,GAAhB,EAAqB;AACjB;AACH;;AAED,aAAKE,IAAL,GAAYF,GAAZ;AACA,aAAKI,SAAL;AACH,KAjDI;AAmDLK,UAnDK,oBAmDK;AACN,eAAO,KAAKP,IAAZ;AACH,KArDI;;;AAuDLQ,kBAAa,sBAAUC,KAAV,EAAiBC,GAAjB,EAAsB;AAC/B,YAAG,KAAKjB,SAAR,EAAkB;AACd;AACH;AACD,YAAGgB,SAAS,CAACC,GAAb,EAAiB;AACb;AACH;;AAED,YAAG,KAAKV,IAAL,IAAaU,IAAIZ,GAApB,EAAyB;AACrB,iBAAKa,QAAL,CAAcD,GAAd;AACH;AACJ,KAlEI;;AAoELC,YApEK,oBAoEID,GApEJ,EAoEQ;AACT,YAAIE,cAAe,IAAIxB,GAAGyB,WAAP,CAAmBH,GAAnB,CAAnB;AACA,YAAGE,WAAH,EAAgB;AACZ,iBAAKlB,MAAL,CAAYoB,IAAZ,CAAiBC,MAAjB,GAA0B,IAA1B;AACA,iBAAKrB,MAAL,CAAYkB,WAAZ,GAA0BA,WAA1B;AACH;AACJ,KA1EI;;;AA4ELV,eAAU,qBAAY;AAClB,YAAGd,GAAG4B,GAAH,CAAOC,QAAV,EAAmB;AACf,iBAAKvB,MAAL,CAAYoB,IAAZ,CAAiBC,MAAjB,GAA0B,KAA1B;AACA,gBAAIG,UAAU9B,GAAG+B,MAAH,CAAUC,MAAV,CAAiB,KAAKpB,IAAtB,CAAd;AACA,gBAAGkB,OAAH,EAAW;AACP,oBAAG,CAAC,KAAKzB,SAAT,EAAmB;AACf,yBAAKkB,QAAL,CAAcO,OAAd;AACH;AACJ,aAJD,MAIM;AACF9B,mBAAG+B,MAAH,CAAUE,IAAV,CAAe,KAAKrB,IAApB,EAA0B,KAAKQ,YAAL,CAAkBc,IAAlB,CAAuB,IAAvB,CAA1B;AACH;AACJ;AACJ;;AAxFI,CAAT","file":"tm_spr_web_image.js","sourceRoot":"../../../../../assets/commonScript/component","sourcesContent":["/**\n * 网络资源\n */\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _bDestroy: false,\n\n        sprImg:{\n            default:null,\n            type:cc.Sprite\n        },\n\n        url:{\n            get :function () {\n                return this._url;\n            },\n\n            set:function (url) {\n                if(!url || this._url == url){\n                    return;\n                }\n                this._url = url;\n\n                this.loadImage();\n            }\n        },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    ctor: function () {\n\n        this._bDestroy = false;\n    },\n\n    onLoad () {\n\n    },\n\n    onDestroy:function () {\n        this._bDestroy = true;\n    },\n\n    setUrl (url) {\n        if(this._url == url) {\n            return;\n        }\n\n        this._url = url;\n        this.loadImage();\n    },\n\n    getUrl () {\n        return this._url;\n    },\n\n    loadCallBack:function (error, tex) {\n        if(this._bDestroy){\n            return;\n        }\n        if(error || !tex){\n            return;\n        }\n\n        if(this._url == tex.url) {\n            this.updateSf(tex);\n        }\n    },\n\n    updateSf(tex){\n        let spriteFrame  = new cc.SpriteFrame(tex);\n        if(spriteFrame) {\n            this.sprImg.node.active = true;\n            this.sprImg.spriteFrame = spriteFrame;\n        }\n    },\n\n    loadImage:function () {\n        if(cc.sys.isNative){\n            this.sprImg.node.active = false;\n            let texture = cc.loader.getRes(this._url);\n            if(texture){\n                if(!this._bDestroy){\n                    this.updateSf(texture);\n                }\n            }else {\n                cc.loader.load(this._url, this.loadCallBack.bind(this));\n            }\n        }\n    }\n\n});\n"]}