{"version":3,"sources":["tm_base_app_core.js"],"names":["window","tm","BaseAppCore","cc","Class","properties","gameId","notifierCenter","modelMgr","ctor","arguments","NotifierCenter","ModelMgr","netSocketIo","registerNetDispatch","register","eventName","handler","scope","trigger","params","ignoreScope","listenMsg","protocolName","scoper","requestMsg","request","ignoreMsg","getModel","modelName","fgetModel","destroy","removeNetDispatch","_super"],"mappings":";;;;;;AAAA;;;;;;;;AAQAA,OAAOC,EAAP,GAAYD,OAAOC,EAAP,IAAa,EAAzB;AACAA,GAAGC,WAAH,GAAiBC,GAAGC,KAAH,CAAS;;AAEtBC,gBAAW;AACPC,gBAAO,CAAC,CADD;AAEPC,wBAAe,IAFR;AAGPC,kBAAS;AAHF,KAFW;;AAQtBC,UAAK,gBAAY;AACb,aAAKH,MAAL,GAAcI,UAAU,CAAV,KAAgB,CAAC,CAA/B;;AAEA,aAAKH,cAAL,GAAsB,IAAIN,GAAGU,cAAP,EAAtB;;AAEA,aAAKH,QAAL,GAAgB,IAAIP,GAAGW,QAAP,CAAgB,KAAKN,MAArB,CAAhB;;AAEA;AACAL,WAAGY,WAAH,CAAeC,mBAAf,CAAmC,KAAKR,MAAxC,EAAgD,KAAKC,cAArD;AACH,KAjBqB;;AAmBtB;;;;;;AAMAQ,cAAS,kBAAUC,SAAV,EAAqBC,OAArB,EAA8BC,KAA9B,EAAqC;AAC1C,aAAKX,cAAL,CAAoBQ,QAApB,CAA6BC,SAA7B,EAAwCC,OAAxC,EAAiDC,KAAjD;AACH,KA3BqB;;AA6BtBC,aAAS,iBAASH,SAAT,EAAoBI,MAApB,EAA4B;AACjC,aAAKb,cAAL,CAAoBY,OAApB,CAA4BH,SAA5B,EAAuCI,MAAvC;AACH,KA/BqB;;AAiCtBC,iBAAY,qBAAUH,KAAV,EAAiB;AACzB,aAAKX,cAAL,CAAoBc,WAApB,CAAgCH,KAAhC;AACH,KAnCqB;;AAqCtB;;;;;AAKAI,eAAW,mBAASC,YAAT,EAAuBN,OAAvB,EAAgCO,MAAhC,EAAuC;AAC9C,aAAKhB,QAAL,CAAcc,SAAd,CAAwBC,YAAxB,EAAsCN,OAAtC,EAA+CO,MAA/C;AACH,KA5CqB;;AA8CtB;;;;;AAKAC,gBAAW,oBAAUF,YAAV,EAAwBH,MAAxB,EAAgC;AACvC,aAAKZ,QAAL,CAAckB,OAAd,CAAsBH,YAAtB,EAAoCH,MAApC;AACH,KArDqB;;AAuDtBO,eAAU,mBAAUJ,YAAV,EAAwBN,OAAxB,EAAiCO,MAAjC,EAAyC;AAC/C,aAAKhB,QAAL,CAAcmB,SAAd,CAAwBJ,YAAxB,EAAsCH,MAAtC;AACH,KAzDqB;;AA2DtBQ,cAAS,kBAAUC,SAAV,EAAqB;AAC1B,eAAO,KAAKrB,QAAL,CAAcsB,SAAd,CAAwBD,SAAxB,CAAP;AACH,KA7DqB;;AA+DtBE,aAAS,mBAAY;;AAEjB,aAAKxB,cAAL,CAAoBwB,OAApB;AACA,aAAKvB,QAAL,CAAcuB,OAAd;AACA9B,WAAGY,WAAH,CAAemB,iBAAf,CAAiC,KAAK1B,MAAtC;;AAEA,aAAK2B,MAAL;AACH;;AAtEqB,CAAT,CAAjB","file":"tm_base_app_core.js","sourceRoot":"../../../../../assets/commonScript/core","sourcesContent":["/**\n *\n * 内容:\n *\n * 所有游戏，应用，独立个体的基类\n *\n */\n\nwindow.tm = window.tm || {};\ntm.BaseAppCore = cc.Class({\n\n    properties:{\n        gameId:-1,\n        notifierCenter:null,\n        modelMgr:null\n    },\n\n    ctor:function () {\n        this.gameId = arguments[0] || -1;\n\n        this.notifierCenter = new tm.NotifierCenter();\n\n        this.modelMgr = new tm.ModelMgr(this.gameId);\n\n        //注册网络消息\n        tm.netSocketIo.registerNetDispatch(this.gameId, this.notifierCenter);\n    },\n\n    /**\n     *\n     * @param eventName\n     * @param handler\n     * @param scope\n     */\n    register:function (eventName, handler, scope) {\n        this.notifierCenter.register(eventName, handler, scope)\n    },\n\n    trigger: function(eventName, params) {\n        this.notifierCenter.trigger(eventName, params);\n    },\n\n    ignoreScope:function (scope) {\n        this.notifierCenter.ignoreScope(scope);\n    },\n\n    /**\n     * 监听网络请求\n     * 例子：\n     * this.listenMsg(\"game_getShareAddBall\",           this.onGameConfig,              this);\n     */\n    listenMsg: function(protocolName, handler, scoper){\n        this.modelMgr.listenMsg(protocolName, handler, scoper);\n    },\n\n    /**\n     * 发送网络请求\n     * 例子：\n     * this.requestMsg(\"game_getShareAddBall\", {\"isOpen\": false});\n     */\n    requestMsg:function (protocolName, params) {\n        this.modelMgr.request(protocolName, params);\n    },\n\n    ignoreMsg:function (protocolName, handler, scoper) {\n        this.modelMgr.ignoreMsg(protocolName, params);\n    },\n\n    getModel:function (modelName) {\n        return this.modelMgr.fgetModel(modelName);\n    },\n\n    destroy: function () {\n\n        this.notifierCenter.destroy();\n        this.modelMgr.destroy();\n        tm.netSocketIo.removeNetDispatch(this.gameId);\n\n        this._super();\n    }\n\n});"]}