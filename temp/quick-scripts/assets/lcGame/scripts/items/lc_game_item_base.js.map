{"version":3,"sources":["lc_game_item_base.js"],"names":["window","lc","ItemBase","cc","Class","extends","tm","GameWapper","properties","comNode","Node","spf","SpriteFrame","_comMap","Priority","visible","get","_itemPriority","ItemType","_itemType","ctor","GamePriority","Invalid","GameType","onLoad","_super","initUseCom","onDestroy","_removeAllCom","key","oneCom","destroy","addComByType","type","clazz","game","comFactory","createComByType","com","item","init","LOGE","removeComByType","isCanChance","_doComLogicByType","ComType","Chance","onBeat","Beat","onRemove","Remove","onCrash","info","Crash","onCrashed","Crashed","flag","doLogic","setPos","x","y","node","setPosition"],"mappings":"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","file":"lc_game_item_base.js","sourceRoot":"../../../../../../assets/lcGame/scripts/items","sourcesContent":["/**\n * 游戏元素：元素父类 -- 所有东西都继承他\n */\nwindow.lc = window.lc || {};\nlc.ItemBase = cc.Class({\n    extends: tm.GameWapper,\n\n    properties: {\n        comNode: cc.Node, // 组件的节点\n        spf: [cc.SpriteFrame], // 贴图\n\n        _comMap: null, // 组件列表\n\n        Priority: {\n            visible: false,\n            get: function () {\n                return this._itemPriority;\n            }\n        }, // 优先级\n\n        ItemType: {\n            visible: false,\n            get: function () {\n                return this._itemType;\n            }\n        }, // 物体类型\n\n    },\n\n    ctor () {\n        this._itemPriority = lc.GamePriority.Invalid;\n        this._itemType = lc.GameType.ItemType.Invalid;\n    },\n\n    onLoad () {\n        this._super();\n        this._comMap = {};\n        this.initUseCom();\n\n    },\n\n    onDestroy(){\n        this._removeAllCom();\n\n        this._super();\n    },\n\n    /**\n     * 移除所有组件\n     * @private\n     */\n    _removeAllCom () {\n        for (let key in this._comMap) {\n            let oneCom = this._comMap[key];\n            if(oneCom) {\n                oneCom.destroy();\n            }\n        }\n    },\n\n    /**\n     * 初始化组件\n     */\n    initUseCom: function () {\n        return;\n    },\n\n    /**\n     * 添加组件\n     */\n    addComByType (type) {\n        let clazz = this.game.comFactory.createComByType(type);\n        if(clazz) {\n            let com = new clazz();\n            com.item = this;\n            com.init();\n\n            this._comMap[type] = com;\n        } else {\n            tm.LOGE(false, 'addComByType error : ' + type);\n        }\n\n    },\n\n    /**\n     * 移除组件\n     */\n    removeComByType (type) {\n\n    },\n\n    /**\n     * 是否可选择\n     */\n    isCanChance () {\n        return this._doComLogicByType(lc.GameType.ComType.Chance);\n    },\n\n    onBeat () {\n        return this._doComLogicByType(lc.GameType.ComType.Beat);\n    },\n\n    onRemove () {\n        return this._doComLogicByType(lc.GameType.ComType.Remove);\n    },\n\n    /**\n     * 是否可以爆炸\n     * @returns\n     */\n    onCrash (info) {\n        return this._doComLogicByType(lc.GameType.ComType.Crash, info);\n    },\n\n    /**\n     * 是否可以被爆炸\n     * @returns\n     */\n    onCrashed () {\n        return this._doComLogicByType(lc.GameType.ComType.Crashed);\n    },\n\n    _doComLogicByType (type, info) {\n        let flag = false;\n        let com = this._comMap[type];\n        if(com) {\n            flag = com.doLogic(info);\n        }\n\n        return flag;\n    },\n\n    /**\n     * 设置物体的坐标\n     * @private\n     */\n    setPos (x, y) {\n        this.node.setPosition(x, y);\n    },\n\n});\n\n"]}