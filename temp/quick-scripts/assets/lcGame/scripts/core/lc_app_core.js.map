{"version":3,"sources":["lc_app_core.js"],"names":["require","window","lc","AppCore","cc","Class","extends","tm","BaseAppCore","properties","loginMgr","gameMgr","comFactory","localDt","get","_localDt","ctor","msgProtocol","init","timeStamp","initListen","modelMgr","msg","notifierCenter","asssetMgr","GameAsssetsMgr","LoginMgr","GameMgr","GameCompoentFactory","levelMgr","GameLevelMgr","register","Event","EVT_RES_RELOAD_FINISH","onResLoadFinish","sweetsFactory","GameSweetsFactory","mapMgr","GameMapMgr","hinderFactory","GameHinderFactory","propFactory","GamePropFactory","itemFactory","GameItemFactory","setServerTimeStamp","t","Date","getTime","LOGD","getServerTimeStamp","destroy"],"mappings":"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","file":"lc_app_core.js","sourceRoot":"../../../../../../assets/lcGame/scripts/core","sourcesContent":["/**\n *\n * 内容: 平台App\n *\n */\nrequire(\"../msgProtocol/lc_protocol_main\");\n\nrequire(\"../mgr/lc_login_manage\");\nrequire(\"../mgr/lc_game_manage\");\nrequire(\"../mgr/lc_game_assets_manager\");\nrequire(\"../mgr/lc_game_compoent_factory\");\nrequire(\"../mgr/lc_game_sweets_factory\");\nrequire(\"../mgr/lc_game_prop_factory\");\nrequire(\"../mgr/lc_game_item_factory\");\nrequire(\"../mgr/lc_game_hinder_factory\");\nrequire(\"../mgr/lc_game_map_manage\");\nrequire(\"../mgr/lc_game_level_manage\");\n\nwindow.lc = window.lc || {};\nlc.AppCore = cc.Class({\n\n    extends: tm.BaseAppCore,\n\n    properties:{\n        loginMgr : null, //登陆管理器\n        gameMgr: null,  // 游戏管理器\n        comFactory: null, // 组件工厂\n\n        localDt:{\n            get (){\n                return this._localDt;\n            }\n        }\n    },\n\n    ctor:function () {\n        //平台协议、消息初始化\n        lc.msgProtocol.init();\n\n        //服务器时间\n        this.timeStamp = 0;\n        this._localDt = 0;\n\n        this.initListen();\n    },\n    \n    init:function () {\n        //注册网络消息事件\n        this.modelMgr.init(lc.msgProtocol.msg, this.notifierCenter);\n\n        this.asssetMgr = new lc.GameAsssetsMgr();\n        this.asssetMgr.init();\n\n        // 登陆管理器\n        this.loginMgr = new lc.LoginMgr();\n        this.loginMgr.init();\n\n        // 游戏管理器\n        this.gameMgr = new lc.GameMgr();\n        this.gameMgr.init();\n\n        // 组件工厂\n        this.comFactory = new lc.GameCompoentFactory();\n        this.comFactory.init();\n\n        // 关卡管理器\n        this.levelMgr = new lc.GameLevelMgr();\n        this.levelMgr.init();\n    },\n\n    /**\n     * 初始化监听\n     */\n    initListen () {\n        // 资源加载完毕\n        tm.notifierCenter.register(tm.Event.EVT_RES_RELOAD_FINISH, this.onResLoadFinish,this);\n\n    },\n\n    /**\n     * 资源加载完毕 在这里进行需要用到瑜伽在资源的工厂初始化处理\n     */\n    onResLoadFinish: function () {\n\n        // 糖果工厂\n        this.sweetsFactory = new lc.GameSweetsFactory();\n        this.sweetsFactory.init();\n\n        // 地图工厂\n        this.mapMgr = new lc.GameMapMgr();\n        this.mapMgr.init();\n\n        // 障碍物工厂\n        this.hinderFactory = new lc.GameHinderFactory();\n        this.hinderFactory.init();\n\n        // 道具工厂\n        this.propFactory = new lc.GamePropFactory();\n        this.propFactory.init();\n\n        // 对象工厂\n        this.itemFactory = new lc.GameItemFactory();\n        this.itemFactory.init();\n\n    },\n\n    setServerTimeStamp(t){\n        this.timeStamp = t;\n\n        this._localDt = new Date().getTime() - t;\n\n        tm.LOGD(\"lc.AppCore ms localDt: \", this._localDt);\n    },\n\n    getServerTimeStamp(){\n        return this.timeStamp;\n    },\n\n    destroy : function () {\n        if(this.loginMgr && this.loginMgr.destroy){\n            this.loginMgr.destroy();\n        }\n\n        if(this.gameMgr && this.gameMgr.destroy){\n            this.gameMgr.destroy();\n        }\n    }\n});"]}